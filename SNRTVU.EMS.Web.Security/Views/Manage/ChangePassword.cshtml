@model ChangePasswordViewModel
@{
    ViewBag.Title = "修改密码";
}

@using (Ajax.BeginForm(new AjaxOptions { OnBegin = "begin", OnSuccess = "success" }))
{
    <div class="form-horizontal jumbotron">
        <div class="form-group">
            @Html.LabelFor(m => m.OldPassword, new { @class = "control-label col-sm-2" })
            <div class="col-sm-10">
                @Html.PasswordFor(m => m.OldPassword, new { @class = "form-control", placeholder = "请输入原始密码" })
                @Html.ValidationMessageFor(m => m.OldPassword, string.Empty, new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(m => m.NewPassword, new { @class = "control-label col-sm-2" })
            <div class="col-sm-10">
                @Html.PasswordFor(m => m.NewPassword, new { @class = "form-control", placeholder = "请输入新密码" })
                @Html.ValidationMessageFor(m => m.NewPassword, string.Empty, new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(m => m.ConfirmPassword, new { @class = "control-label col-sm-2" })
            <div class="col-sm-10">
                @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control", placeholder = "请输入确认密码" })
                @Html.ValidationMessageFor(m => m.ConfirmPassword, string.Empty, new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" class="btn btn-primary">提 交</button>
            </div>
        </div>
    </div>
}

@section scripts{
    @Scripts.Render("~/bundles/jqueryuno")
    <script type="text/javascript">
        var begin = function () {
            common.Loading("处理中...")
        }

        var success = function (data) {
            if (data) {
                if (data.result) {
                    common.Success(data.msg)
                    location = data.url;
                } else {
                    common.Error(data.msg)
                }
            }
        }
    </script>
}
